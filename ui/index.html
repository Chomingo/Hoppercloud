<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystal Launcher</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-layout">
        <aside class="sidebar" id="sidebar">
            <!-- Sidebar items injected by JS -->
        </aside>

        <div class="main-content">
            <header>
                <div class="header-left">
                    <div id="player-head-container" class="player-head-container">
                        <div id="player-head" class="player-head"></div>
                    </div>

                    <h1 id="header-username">Crystal Launcher</h1>
                </div>
                <div class="header-controls">
                    <div id="status-badge" class="badge">Listo</div>
                    <button id="settings-btn" class="console-toggle-btn" title="ConfiguraciÃ³n"
                        style="margin-right: 0.5rem;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                    </button>
                    <button id="toggle-console-btn" class="console-toggle-btn" title="Toggle Console">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="4 17 10 11 4 5"></polyline>
                            <line x1="12" y1="19" x2="20" y2="19"></line>
                        </svg>
                    </button>
                </div>
            </header>

            <main>
                <div class="dashboard-wrapper">
                    <!-- Top Section: News & Info -->
                    <div class="dashboard-top">
                        <!-- News Section -->
                        <div class="news-container">
                            <div class="section-header">
                                <h2>Noticias</h2>
                            </div>
                            <div class="news-list">
                                <!-- Static News Item (Can be made dynamic later) -->
                                <div class="news-card glass-panel">
                                    <div class="news-icon-wrap">
                                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="url(#grad1)"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <defs>
                                                <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                                    <stop offset="0%" style="stop-color:#00c6ff;stop-opacity:1" />
                                                    <stop offset="100%" style="stop-color:#0072ff;stop-opacity:1" />
                                                </linearGradient>
                                            </defs>
                                            <path d="M12 2l9 4.9V17L12 22l-9-4.9V6.9L12 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="news-content">
                                        <h3>Bienvenido a Crystal Launcher</h3>
                                        <p>Hola, bienvenido al nuevo launcher oficial.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Info/Status Section -->
                        <div class="info-container">
                            <div class="info-card glass-panel">
                                <h3>Crystal Launcher <span class="version-highlight">3.0.0</span></h3>
                                <p class="status-text">Sistema listo y operativo.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Hidden elements to maintain JS compatibility -->
                    <h2 id="instance-title" style="display:none;"></h2>
                    <p id="instance-desc" style="display:none;"></p>

                    <div class="center-actions">
                        <button id="update-launcher-btn" class="update-btn hidden">
                            <span>âš¡ Nueva versiÃ³n disponible</span>
                        </button>
                    </div>

                    <!-- Bottom Control Bar (Restored) -->
                    <div class="controls-bar-wrapper">
                        <div class="controls-section glass-panel">
                            <div class="login-row">
                                <div class="login-mode-switch">
                                    <button id="mode-offline" class="mode-btn active">Offline</button>
                                    <button id="mode-microsoft" class="mode-btn">Microsoft</button>
                                </div>

                                <div class="user-input" id="offline-input-container">
                                    <input type="text" id="username" placeholder="Nombre de Usuario" autocomplete="off"
                                        spellcheck="false">
                                </div>
                            </div>

                            <div id="microsoft-info" class="hidden"
                                style="text-align: center; margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                                <p>Inicia sesiÃ³n de forma segura con tu cuenta de Microsoft</p>
                            </div>

                            <button id="launch-btn" class="launch-btn">
                                <span class="btn-text">JUGAR</span>
                                <div class="progress-bar" id="progress-bar"></div>
                            </button>

                            <button id="retry-btn" class="launch-btn hidden"
                                style="background: var(--error); margin-top: 10px;">
                                <span class="btn-text">REINTENTAR ACTUALIZACIÃ“N</span>
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <footer>
                <p id="version-text"></p>
            </footer>
        </div>

        <!-- Console Overlay -->
        <div id="console-container" class="console-wrapper">
            <div class="console-header">
                <div class="console-title">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <polyline points="4 17 10 11 4 5"></polyline>
                        <line x1="12" y1="19" x2="20" y2="19"></line>
                    </svg>
                    Registro del Sistema
                </div>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <button id="copy-logs-btn" class="badge" style="cursor: pointer; background: transparent;">Copiar
                        Logs</button>
                    <button id="close-console-btn" class="badge" style="cursor: pointer; background: transparent;">âœ•
                        Cerrar</button>
                </div>
            </div>
            <div class="console-output" id="console-output">
                <p class="log-line" style="color: var(--text-secondary);">Inicializando sistema...</p>
            </div>
        </div>

        <!-- Settings Overlay -->
        <div id="settings-overlay" class="settings-overlay hidden">
            <div class="settings-modal flex-modal">
                <div class="settings-content-wrap">
                    <div class="settings-header">
                        <h3>ConfiguraciÃ³n</h3>
                        <button id="close-settings-btn" class="close-btn">âœ•</button>
                    </div>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="ram-slider">Memoria RAM (Java)</label>
                            <div class="range-container">
                                <input type="range" id="ram-slider" min="2" max="16" step="1" value="4">
                                <span id="ram-value">4 GB</span>
                            </div>
                            <p class="setting-desc">Asigna mÃ¡s memoria si usas muchos mods.</p>
                        </div>

                        <!-- Cleanup Section -->
                        <div class="setting-item">
                            <label>Mantenimiento</label>
                            <p class="setting-desc">Borra archivos temporales y basura para liberar espacio.</p>
                            <div class="cleanup-actions">
                                <button id="cleanup-btn" class="badge vivid-btn"
                                    style="cursor: pointer; padding: 10px 15px; margin-top: 5px; background: linear-gradient(135deg, #ff416c, #ff4b2b) !important; border: none; font-weight: bold; width: 100%; transition: all 0.3s ease;">
                                    ðŸ§¹ Limpieza RÃ¡pida
                                </button>
                                <p id="cleanup-status"
                                    style="font-size: 0.8em; margin-top: 5px; color: var(--text-secondary); text-align: center; height: 1.2em;">
                                </p>
                            </div>
                        </div>

                        <!-- Skin Management -->
                        <div class="setting-item" id="skin-management-section">
                            <label>Apariencia (Skin)</label>
                            <p class="setting-desc">Personaliza tu apariencia en el juego.</p>
                            <div class="skin-actions">
                                <button id="upload-skin-btn" class="badge"
                                    style="cursor: pointer; padding: 8px 12px; margin-top: 5px;">
                                    ðŸ“¤ Cambiar Skin (.png)
                                </button>
                                <input type="file" id="skin-file-input" accept=".png" style="display: none;">
                            </div>
                        </div>

                    </div>
                </div>
                <div class="skin-preview-wrap">
                    <canvas id="skin-viewer-canvas"></canvas>
                    <div class="skin-viewer-controls">
                        <span class="badge" id="skin-model-name">Classic</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="skin2D.js"></script>
    <script src="skinview3d.bundle.min.js"></script>
    <script src="renderer.js"></script>
</body>

</html>